# static_server


static_server/
│
├── ansible/                     # Папка с всеми Ansible конфигурациями
│   ├── ansible.cfg              # Конфигурационный файл Ansible
│   ├── inventory                # Инвентори файл с хостами
│   ├── playbook.yml             # Основной плейбук Ansible
│   ├── group_vars/              # Переменные для всей группы хостов
│   │   └── all.yml              # Переменные для всех хостов
│   └── roles/                   # Папка с ролями
│       ├── common/              # Роль common для установки базовых пакетов
│       │   ├── tasks/
│       │   │   └── main.yml     # Основные задачи установки пакетов
│       │   └── handlers/
│       │       └── main.yml     # Рестарты и хендлеры (если нужно, например, для системных служб)
│       └── users/               # Роль управления пользователями
│       │   ├── tasks/
│       │   │   └── main.yml     # Основные задачи управления пользователями
│       └── ssh/                 # Роль настройки SSH
│       │   ├── tasks/
│       │   │   └── main.yml     # Основные задачи настройки SSH
│       └── nginx/               # Роль установки и настройки Nginx
│       │   ├── tasks/
│       │   │   └── main.yml     # Основные задачи установки и конфигурации Nginx
│       │   ├── templates/
│       │   │   └── nginx.conf.j2  # Шаблон конфигурации Nginx
│       └── static/              # Роль для загрузки статики
│           └── tasks/
│               └── main.yml     # Основные задачи для копирования статики
│
├── docker/                      # Папка для Docker окружения
│   ├── Dockerfile               # Dockerfile для контейнера с Ubuntu 24.04
│   ├── docker-compose.yml       # Файл запуска с помощью docker-compose
│ 
├── static/                      # Папка с изображениями и другой статикой
│ 
├── README.md                    # Документация и инструкции



### Работа с проектом
1. Создание тестового окружения Docker — сначала нужно создать контейнер с помощью docker-compose:

```docker compose -f docker/docker-compose.yml  up --build -d```

2. Запуск плейбука Ansible — после того, как контейнер настроен и работает, нужно запустить Ansible плейбук для настройки всех сервисов в нём:

```ansible-playbook -i ansible/inventory ansible/playbook.yml```

3. Проверка раздачи статики — когда плейбук завершит выполнение, проверьте, что собранный контейнер корректно раздаёт статический контент, перейдя в браузере по адресу:
http://localhost:8080/images/

4. SSH доступ — доступ к контейнеру по SSH возможен через порт 8022. Вы можете подключиться так:

```ssh -p 8022 devuser@localhost```
